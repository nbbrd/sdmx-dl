{{ $csv := resources.Get "sources.csv" | transform.Unmarshal (dict "delimiter" ",") }}
{{ $lineCount := len $csv }}

sdmx-dl is bundled with the following pre-configured {{ sub $lineCount 1 }} web services:

<table>
    <thead>
        <tr>
            <th>Source</th>
            <th>Status</th>
            <th>Uptime</th>
        </tr>
    </thead>
    <tbody>
    {{ range $i, $r := $csv }}
    {{ if ne $i 0 }}
    <tr>
        {{ $id := index $r 0 }}
        {{ $name := index $r 1 }}
        {{ $website := index $r 7 }}
        {{ $domain := (urls.Parse $website).Host }}
        {{ $monitor_website := index $r 9 }}
        {{ $monitor_name := replace (lower $id) "_" "-" }}
        <td>
            <div style="display: flex; align-items: center;">
                <img src="https://icons.duckduckgo.com/ip3/{{ $domain }}.ico" width="32" style="margin-right: 8px;" />
                <div>
                    <code>{{ $id }}</code><br>
                    <small style="padding: .25rem .5rem; display: inline-block;"><a href="{{ $website }}">{{ $name }}</a></small>
                </div>
            </div>
        </td>
        <td><a href="{{ $monitor_website }}"><img src="https://img.shields.io/badge/dynamic/yaml?label=status&query=%24.status&url=https%3A%2F%2Fraw.githubusercontent.com%2Fnbbrd%2Fsdmx-upptime%2Fmaster%2Fhistory%2F{{ $monitor_name }}.yml"></a></td>
        <td><a href="{{ $monitor_website }}"><img src="https://img.shields.io/endpoint?url=https%3A%2F%2Fraw.githubusercontent.com%2Fnbbrd%2Fsdmx-upptime%2Fmaster%2Fapi%2F{{ $monitor_name }}%2Fuptime.json"></a></td>
    </tr>
    {{ end }}
    {{ end }}
    </tbody>
</table>

